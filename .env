# 告警管理平台环境变量配置文件
# 开发环境配置

# =============================================================================
# 应用配置
# =============================================================================

# 应用环境 (development, staging, production)
APP_ENV=development

# 应用名称
APP_NAME=alert-management-platform

# 应用版本
APP_VERSION=1.0.0

# 服务端口
PORT=8080

# 日志级别 (debug, info, warn, error)
LOG_LEVEL=debug

# 日志格式 (json, text)
LOG_FORMAT=text

# =============================================================================
# 数据库配置
# =============================================================================

# PostgreSQL/TimescaleDB 数据库配置
DB_HOST=localhost
DB_PORT=5433
DB_NAME=alert_management_dev
DB_USER=alert_user
DB_PASSWORD=alert_password
DB_SSLMODE=disable

# 数据库连接池配置
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=300s
DB_CONN_MAX_IDLE_TIME=60s

# 数据库迁移配置
DB_MIGRATION_PATH=file://migrations
DB_MIGRATION_TABLE=schema_migrations
DB_AUTO_MIGRATE=true

# =============================================================================
# Redis 配置 (用于缓存、消息队列和分布式锁)
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5

# 消息队列配置
QUEUE_DEFAULT_QUEUE=alert_queue
QUEUE_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=5s
QUEUE_DEAD_LETTER_QUEUE=alert_dlq
QUEUE_BATCH_SIZE=10
QUEUE_CONSUMER_TIMEOUT=30s

# 分布式锁配置
LOCK_DEFAULT_TTL=30s
LOCK_RETRY_INTERVAL=100ms
LOCK_MAX_RETRIES=10
LOCK_AUTO_RENEW=true
LOCK_RENEW_INTERVAL=10s

# 缓存配置
CACHE_DEFAULT_TTL=1h
CACHE_KEY_PREFIX=alert_platform
CACHE_NAMESPACE=default

# =============================================================================
# JWT 认证配置
# =============================================================================

# JWT 密钥 (开发环境密钥)
JWT_SECRET=dev_jwt_secret_key_change_in_production

# JWT 过期时间
JWT_ACCESS_TOKEN_EXPIRE=24h
JWT_REFRESH_TOKEN_EXPIRE=168h

# =============================================================================
# 告警配置
# =============================================================================

# 告警评估间隔
ALERT_EVALUATION_INTERVAL=30s

# 告警历史保留天数
ALERT_HISTORY_RETENTION_DAYS=90

# 最大并发告警评估数
ALERT_MAX_CONCURRENT_EVALUATIONS=100

# =============================================================================
# 通知配置
# =============================================================================

# 邮件通知配置 (开发环境可选)
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=
SMTP_TLS=true

# 钉钉通知配置 (开发环境可选)
DINGTALK_WEBHOOK_URL=
DINGTALK_SECRET=

# 企业微信通知配置 (开发环境可选)
WECOM_WEBHOOK_URL=

# Slack 通知配置 (开发环境可选)
SLACK_WEBHOOK_URL=

# =============================================================================
# 监控数据源配置
# =============================================================================

# Prometheus 配置
PROMETHEUS_URL=http://localhost:9090
PROMETHEUS_TIMEOUT=30s
PROMETHEUS_MAX_SAMPLES=50000

# Grafana 配置 (开发环境可选)
GRAFANA_URL=http://localhost:3000
GRAFANA_API_KEY=

# InfluxDB 配置 (开发环境可选)
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=
INFLUXDB_ORG=
INFLUXDB_BUCKET=

# =============================================================================
# 文件存储配置
# =============================================================================

# 本地文件存储路径
FILE_STORAGE_PATH=./storage

# 最大文件上传大小 (MB)
MAX_UPLOAD_SIZE=10

# 允许的文件类型
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,txt,md

# =============================================================================
# 安全配置
# =============================================================================

# CORS 允许的源
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# CORS 允许的方法
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS

# CORS 允许的头部
CORS_ALLOWED_HEADERS=Origin,Content-Type,Accept,Authorization,X-Requested-With

# 请求频率限制 (每分钟请求数)
RATE_LIMIT_PER_MINUTE=1000

# =============================================================================
# 性能配置
# =============================================================================

# HTTP 服务器配置
HTTP_READ_TIMEOUT=30s
HTTP_WRITE_TIMEOUT=30s
HTTP_IDLE_TIMEOUT=60s
HTTP_READ_HEADER_TIMEOUT=10s

# 工作协程池大小
WORKER_POOL_SIZE=10

# 队列缓冲区大小
QUEUE_BUFFER_SIZE=1000

# =============================================================================
# 开发配置
# =============================================================================

# 是否启用调试模式
DEBUG=true

# 是否启用性能分析
PPROF_ENABLED=true
PPROF_PORT=6060

# 是否启用 API 文档
API_DOCS_ENABLED=true
API_DOCS_PATH=/docs

# =============================================================================
# 健康检查配置
# =============================================================================

# 健康检查端点
HEALTH_CHECK_PATH=/health

# 就绪检查端点
READINESS_CHECK_PATH=/ready

# 存活检查端点
LIVENESS_CHECK_PATH=/live

# 健康检查超时时间
HEALTH_CHECK_TIMEOUT=5s

# 健康检查间隔
HEALTH_CHECK_INTERVAL=30s